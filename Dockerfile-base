# This base image is already configured for many purposes
FROM ghcr.io/biosimulators/biosimulators:latest

LABEL authors="alexanderpatrie"

# TODO: make base version more nuanced
ENV PACKAGE_ROOT=ghcr.io/biosimulators/bio-check
ENV BASE_VERSION=0.0.0
ENV BASE_IMAGE="$PACKAGE_ROOT-base:$BASE_VERSION"
ENV DEBIAN_FRONTEND=noninteractive

WORKDIR /app

RUN mkdir /app/bio_check  \
    && mkdir /app/data

# copy deps
COPY ./assets/requirements.base.txt /app/requirements.txt

# copy entry script
COPY ./assets/scripts/enter.sh /app/.enter.sh

RUN pip install --upgrade pip  \
    && pip uninstall biosimulators-utils -y \
    && pip uninstall biosimulators-masspy -y \
    && pip install --no-cache-dir -r ./requirements.txt
